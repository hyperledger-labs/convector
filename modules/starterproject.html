<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>StarterProject | Convector Framework</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../assets/css/main.css">
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"
	integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="../assets/js/search.js" data-base="..">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="../index.html" class="title uppercase">
						<img src="../assets/images/convector.svg" class="convector-logo">
					</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-2 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul class="custom-nav">
					<li>
						<a href="../index.html">Home</a>
					</li>
					<li>
						<a href="fundamentals.html">Fundamentals</a>
						<ul>
							<li>
								<a href="packages.html">Packages</a>
							</li>
							<li>
								<a href="models.html">Models</a>
							</li>
							<li>
								<a href="controllers.html">Controllers</a>
							</li>
							<li>
								<a href="chaincode_manager.html">Tool: Chaincode Manager</a>
							</li>
							<li>
								<a href="development_environment.html">Tool: Development Environment</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="getting_started.html">Getting Started</a>
						<ul>
							<li>
								<a href="other_layers.html">Fullstack usage</a>
							</li>
						</ul>
					</li>
					<li>
						<a href="hyperledger_fabric.html">An small overview of Hyperledger Fabric</a>
					</li>
					<li>
						<a href="https://github.com/worldsibu/convector-cli" target="_blank">
							<i class="fa fa-rocket" aria-hidden="true"></i>
						Convector CLI</a>
					</li>
					<li>
						<a href="https://github.com/worldsibu/convector" target="_blank">
							<i class="fa fa-github" aria-hidden="true"></i>
						Source code</a>
					</li>
					<li>
						<a href="https://medium.com/worldsibu/for-devs/home" target="_blank">
						<i class="fa fa-medium" aria-hidden="true"></i>Medium Blog</a>
					</li>
					<li>
						<span class="powered-by">Powered by <a href="https://worldsibu.io">WorldSibu</a>. Licensed under an <a href="https://raw.githubusercontent.com/worldsibu/convector/develop/LICENSE.txt" target="_blank">Apache 2.0 license</a>.</span>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
		<div class="col-10 col-content">
			<div class="tsd-page-title">
				<div class="container-fluid">
					<ul class="tsd-breadcrumb">
						<li>
							<a href="../index.html"> Convector Framework</a>
						</li>
					</ul>
					<h1>StarterProject</h1>
				</div>
			</div>
			<div>
				<section class="tsd-panel tsd-comment">
					<div class="tsd-comment tsd-typography">
						<div class="lead">
							<!-- # Guides

- <a href="fundamentals.html">Fundamentals</a>
- <a href="getting_started.html">Getting-Started</a> -->
							<h1 id="a-typical-development-lifecycle">A typical development lifecycle</h1>
							<p>As said before, Convector doesn&#39;t require <code>Lerna</code> to run, but we highly recommend it. This starter project&#39;s source code can be found <a href="https://github.com/worldsibu/convector-example-drug-supply-chain">here</a>.</p>
							<p>We also like mono-repos, and even though they are not required here either, this examples works like that.</p>
							<p>// </p>
							<p>Based on the previous explanation the flow of your application would look like:</p>
							<ul>
								<li>Your front end calls your api or backend service.</li>
								<li>Your backend service will run under de identity of a blockchain participant.</li>
								<li>Your backend can call any of three components:<ul>
										<li>The World State database. (it can be done by injecting a Convector <strong>storage</strong> to your referenced model)</li>
										<li>The chaincodes inside the peers. (it can be done by injecting a Convector <strong>adapter</strong> to your Controller Client generated file from your programmed chaincode controller)</li>
										<li>Another off-chain service.</li>
									</ul>
								</li>
							</ul>
							<p>To create a smart contract system you need:</p>
							<ul>
								<li>Your code. Containing your smart contracts.<ul>
										<li>It is usually made up of front end modules, backend or APIs, peers (nodes) which run the smart contracts.</li>
									</ul>
								</li>
								<li>A development environment (a fullblown test blockchain) created by the <a href="https://github.com/worldsibu/convector/blob/develop/tutorials/dev-env.md">Development-Environment</a>.</li>
								<li>A set of tools to interact with the blockchain, such as <a href="https://github.com/worldsibu/convector/blob/develop/tutorials/chaincode-manager.md">Chaincode-Manager</a>.</li>
							</ul>
							<p>If you are working with a mono-repo like us, this scripts in your root <code>package.json</code> will make your life easier.</p>
							<pre><code class="lang-json">"scripts": {
    "wait": "sleep 5",
    "user:fingerprint": "f () { node -e \"console.log(JSON.parse(require('fs').readFileSync('./.convector-dev-env/.hfc-$1/$2', 'utf8')).enrollment.identity.certificate)\" | openssl x509 -fingerprint -noout | cut -d '=' -f2 ; }; f",
    "================= Life cycle =================": "==================================",
    "install": "npm-run-all -s lerna:install",
    "init": "npm-run-all -s env:init 'cc:start -- 1'",
    "start": "npm-run-all -s env:start",
    "clean": "npm-run-all -s env:stop env:clean",
    "restart": "npm-run-all -s clean install start init",
    "test": "npm-run-all -s lerna:test",
    "================= Lerna =================": "==================================",
    "lerna:install": "lerna bootstrap",
    "lerna:build": "lerna run build",
    "lerna:stop": "lerna run stop --parallel",
    "lerna:clean": "lerna clean --yes &amp;&amp; lerna run clean --parallel",
    "lerna:test": "lerna exec npm run test",
    "lerna:lint": "lerna run lint",
    "================= Dev Env =================": "==================================",
    "env:init": "./node_modules/@worldsibu/convector-tool-dev-env/scripts/init.sh",
    "env:start": "./node_modules/@worldsibu/convector-tool-dev-env/scripts/start.sh",
    "env:stop": "./node_modules/@worldsibu/convector-tool-dev-env/scripts/stop.sh",
    "env:restart": "./node_modules/@worldsibu/convector-tool-dev-env/scripts/restart.sh",
    "env:clean": "./node_modules/@worldsibu/convector-tool-dev-env/scripts/clean.sh",
    "================= Chaincodes =================": "==================================",
    "cc:start": "f() { npm-run-all -s cc:package -p \"cc:install -- org1 $1\" \"cc:install -- org2 $1\" -s wait \"cc:instantiate -- $1\"; }; f",
    "cc:package": "chaincode-manager --config ./org1.chaincode.config.json --output ./chaincode package",
    "cc:install": "f() { chaincode-manager --config ./$1.chaincode.config.json install ./chaincode &lt;PUT HERE YOUR CC NAME&gt; $2; }; f",
    "cc:instantiate": "chaincode-manager --config ./org1.chaincode.config.json instantiate &lt;PUT HERE YOUR CC NAME&gt;",
    "cc:upgrade": "chaincode-manager --config ./org1.chaincode.config.json upgrade &lt;PUT HERE YOUR CC NAME&gt;",
    "cc:invoke": "f() { chaincode-manager --config ./$1.chaincode.config.json invoke &lt;PUT HERE YOUR CC NAME&gt; ${@:2}; }; f",
    "cc:upgradeInAll": "f() { npm-run-all -s cc:package \"cc:install -- org1 $1\" \"cc:install -- org2 $1\" \"cc:upgrade -- $1\"; }; f"
  },
</code></pre>
							<p>* <a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a> is used on those scripts.</p>
							<p>If seen closely, you get all those commands your lifecycle development will need.</p>
							<ul>
								<li>cc:* these are the commands to handle the installation, upgrade or invoke of your chaincodes.<ul>
										<li>A chaincode usually needs to be 1.) packaged 2.) installed on each peer 3.) instantiated<ul>
												<li>There are helpers among these helpers. For example <code>npm run cc:start 1.0</code> will install your chaincode for the first time by calling <code>cc:package</code>, <code>cc:install</code> and lastly <code>cc:instantiate</code>. But we keep each task there for granularity and empowering you for more advanced scenarios.</li>
											</ul>
										</li>
										<li>If upgrading the code (like applying a fix) you need to 1.) package 2.) install on each peer 3.) upgrade on one peer.</li>
									</ul>
								</li>
								<li>env:* these are related to the blockchain components running on your computer. The names are clear by themselves.</li>
							</ul>
							<h2 id="typical-order-of-tasks-you-perform-while-developing-">Typical order of tasks you perform while developing.</h2>
							<ol>
								<li>Code your chaincode.</li>
								<li>Test it locally (we encourage to make unit testing through the mock adapter, since testing against the blockchain takes a lot of time due to the installation process).</li>
								<li>Deploy to the blockchain! Probably you haven&#39;t provisioned the blockchain yet, so you can run <code>npm run env:restart</code>.</li>
								<li>And install your chaincode <code>npm run cc:start 1.0</code>, it will call the previously seen tasks which uses each of the  <code>...chaincode.config.json</code> files (you need to generate one for each organization to install it on every participant). But before:</li>
								<li>Compile your chaincode project. Let&#39;s say your chaincode project is at &#39;root/@worldsibu/chaincodes/cc-drug&#39; (like in the source code referenced to this project) so you would add these tasks at the <code>package.json</code>. Tasks to include: <pre><code class="lang-json">"client:generate": "generate-controller-interface -c DrugController",
"------------ STANDARD TASKS ------------": "",
"clean": "rimraf dist client",
"build": "npm run clean &amp;&amp; npm run client:generate &amp;&amp; tsc",
"prepare": "npm run build" 
</code></pre>
								</li>
								<li>Run <code>npm run build</code> at that folder, or if using lerna <code>lerna run build --scope @worldsibu/convector-example-dsc-cc-drug</code>.</li>
								<li>Be sure that each <code>...chaincode.config.json</code> file is configured correctly with the packages and references to your project and the name you like to give to your chaincode! </li>
								<li>Proceed to run <code>npm run cc:start 1.0</code>.</li>
								<li>This installation task may take some time.</li>
								<li>A new folder was generated at the root of your project called &quot;chaincode&quot; it is automatically regenerated on each package.</li>
								<li>A common next task would be adding your chaincode base components to your backend (model and controller - in the case of Convector when compiling a chaincode project a clean Controller Client gets built for you to inject the implementation of the logic).</li>
								<li>Add the chaincode project as dependencies to you backend project. We like at least this structure inside your server project: <ol>
										<li>utils / - controller.ts, - helper.ts, - models.ts, - index.ts</li>
									</ol>
								</li>
								<li>The reason for those files (as you can see in the source code referenced) is to inject the Adapters and Storages used on this specific project. </li>
								<li>Since we are using the official SDK from the Hyperledger Project, we need to provide a <strong>Network Profile</strong>. It is a simple JSON containing the setup of your network. After you started the blockchain in your computer with <code>npm run env:restart</code> a folder was automatically created with the name <code>.convector-dev-env</code> go and copy each file <code>.convector-dev-env/examples/org1.network-profile.yaml</code> and <code>.convector-dev-env/examples/org2.network-profile.yaml</code> those are examples of that network profile you need. Change the setting accordingly to your project and store them in an accesible path for the server. We like to copy them to a <code>/config</code> folder inside the server. Checkout the referenced source code to see it in action.</li>
								<li>That newly created folder <code>.convector-dev-env</code> will be referenced by a lot of files to access the certificates with which your servers and users will run. For example, as seen before, the network profile (which is used by the Fabric SDK needs them), the chaincode manager will also require them to access the admin credentials to install chaincodes and also de dev env which itself generated them.</li>
							</ol>
							<p>We recommend checking out this project to put every required component where needed <a href="https://github.com/worldsibu/convector-example-drug-supply-chain">access code</a>.</p>
							<hr>
							<p><a href="https://github.com/worldsibu/convector-cli" target="_blank">Convector CLI</a> has been recently released! Get familiar with the new way to create Enterprise Smart Contract Systems.</p>
							<p><a href="https://github.com/worldsibu/convector/issues"><img src="https://img.shields.io/github/issues-raw/@worldsibu/convector.svg" alt="Issues"></a>
								<a href="https://worldsibu.io/subscribe/"><img src="https://img.shields.io/badge/Newsletter--orange.svg" alt="Newsletter"></a>
							<a href="https://discord.gg/twRwpWt"><img src="https://img.shields.io/discord/469152206638284800.svg" alt="Discord"></a></p>
							<p><a href="https://www.npmjs.com/package/@worldsibu/convector-core-chaincode"><img src="https://img.shields.io/npm/v/@worldsibu/convector-core-chaincode.svg" alt="npm"></a>
							<a href="https://opensource.org/licenses/Apache-2.0"><img src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" alt="License"></a></p>
							<p><a class="github-button" href="https://github.com/worldsibu/convector" data-icon="octicon-star" data-size="large" aria-label="Star worldsibu/convector on GitHub">Star</a> <a class="github-button" href="https://github.com/worldsibu" data-size="large" aria-label="Follow @worldsibu on GitHub">Follow</a></p>
							<script async defer src="https://buttons.github.io/buttons.js"></script>
						</div>
					</div>
				</section>
			</div>
		</div>
	</div>
</div>
<footer  class="with-border-bottom" >
</footer>
<div class="container tsd-generator">
	<a href="https://worldsibu.io">
		<img src="../assets/images/worldsibu.svg" class="worldsibu-logo">
	</a>
</div>
<div class="overlay"></div>
<script src="../assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="../assets/js/search.js"><' + '/script>');</script>
<script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-128943824-2', '');
        ga('send', 'pageview');
    </script>
</body>
</html>